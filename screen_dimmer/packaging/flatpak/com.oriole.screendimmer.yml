app-id: com.oriole.screendimmer
command: screendimmer
runtime: org.freedesktop.Platform
runtime-version: "24.08"
sdk: org.freedesktop.Sdk

modules:
  - name: desktop-and-icons
    buildsystem: simple
    sources:
      - type: dir
        path: .
    build-commands:
      - install -Dm644 com.oriole.screendimmer.desktop /app/share/applications/com.oriole.screendimmer.desktop
      - install -Dm644 icons/hicolor/64x64/apps/com.oriole.screendimmer.png /app/share/icons/hicolor/64x64/apps/com.oriole.screendimmer.png
      - install -Dm644 icons/hicolor/128x128/apps/com.oriole.screendimmer.png /app/share/icons/hicolor/128x128/apps/com.oriole.screendimmer.png
      - install -Dm644 icons/hicolor/256x256/apps/com.oriole.screendimmer.png /app/share/icons/hicolor/256x256/apps/com.oriole.screendimmer.png

  - name: app
    buildsystem: simple
    sources:
      - type: dir
        path: ../../build/linux/x64/release/bundle
        dest: bundle
    build-commands:
      - install -d /app/bin
      - cp -r bundle/* /app/bin/
      - chmod +x /app/bin/screendimmer
